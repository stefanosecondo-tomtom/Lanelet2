FROM ubuntu:20.04 AS lanelet2_deps

RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y \
            build-essential \
            cmake \
            locales \
            software-properties-common


RUN add-apt-repository ppa:deadsnakes/ppa -y

RUN apt install python3.9 python3.9-dev python3-setuptools -y

RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y \
        libboost-all-dev \
        libeigen3-dev \
        libgeographic-dev \
        libpugixml-dev \
        libboost-python-dev \
    && apt-get clean && rm -rf /var/lib/apt/lists/*

COPY . /workspace
WORKDIR /workspace

# RUN mkdir cmake-build-release && cd cmake-build-release && cmake .. -DCMAKE_BUILD_TYPE=Release
RUN python3.9 setup.py install